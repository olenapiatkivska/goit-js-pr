{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/render-function.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = '';\n  #searchParams = new URLSearchParams({\n    per_page: 12,\n    orientation: 'portrait',\n    client_id: this.#API_KEY,\n  });\n  async getPopularPhotos(page) {\n    const url = `${this.#BASE_URL}/search/photos?page=${page}&query=popular&${\n      this.#searchParams\n    }`;\n\n    try {\n      const res = await axios(url);\n      return res.data;\n    } catch (error) {\n      console.log(error);\n      iziToast.error({\n        message: 'Error',\n      });\n    }\n  }\n\n  async getPhotosByQuery(page) {\n    const url = `${this.#BASE_URL}/search/photos?page=${page}&query=${\n      this.#query\n    }&${this.#searchParams}`;\n\n    try {\n      const res = await axios(url);\n      return res.data;\n    } catch (error) {\n      console.log(error);\n      iziToast.error({\n        message: 'Error',\n      });\n    }\n  }\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n\n  async getStats() {\n    const url = `${this.#BASE_URL}/stats/total?client_id=${this.#API_KEY}`;\n    try {\n      const { data } = await axios.get(url);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","export function markup(imgs) {\n  return imgs\n    .map(\n      ({\n        id,\n        urls: { small },\n        alt_description,\n      }) => `   <li class=\"gallery__item\"  id=\"${id}\">\n            <img src=\"${small}\" alt=\"${alt_description}\" >\n          </li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { UnsplashAPI } from './UnsplashAPI';\nimport { markup } from './render-function';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.min.css';\nconst galleryList = document.querySelector('.js-gallery');\nconst searchFormElem = document.querySelector('.js-search-form');\nconst loaderElem = document.querySelector('.loader');\n\nconst container = document.getElementById('tui-pagination-container');\nconst pagination = new Pagination(container, {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n});\n\nconst page = pagination.getCurrentPage();\n\nconst api = new UnsplashAPI();\napi\n  .getPopularPhotos(page)\n  .then(data => {\n    const markupImg = markup(data.results);\n    galleryList.innerHTML = markupImg;\n    pagination.reset(data.total);\n  })\n  .catch(error => console.log(error));\n\nfunction popularImages(event) {\n  const currentPage = event.page;\n  loaderElem.classList.remove('visually-hidden');\n  api\n    .getPopularPhotos(currentPage)\n    .then(data => {\n      const markupImg = markup(data.results);\n      galleryList.innerHTML = markupImg;\n    })\n    .catch(error => console.log(error))\n    .finally(() => loaderElem.classList.add('visually-hidden'));\n}\npagination.on('afterMove', popularImages);\n\nsearchFormElem.addEventListener('submit', async event => {\n  event.preventDefault();\n  const inputValue = searchFormElem.elements.query.value.trim();\n  if (!inputValue) {\n    iziToast.warning({\n      position: 'topRight',\n      message: 'Please fill query field',\n    });\n    return;\n  }\n  pagination.off('afterMove', popularImages);\n  pagination.off('afterMove', byQueryImages);\n  api.query = inputValue;\n  loaderElem.classList.remove('visually-hidden');\n  try {\n    const data = await api.getPhotosByQuery(page);\n    if (!data.results.length) {\n      iziToast.warning({\n        position: 'topRight',\n        message: 'No results',\n      });\n      return;\n    }\n    iziToast.info({\n      position: 'topRight',\n      message: `We found ${data.total} results`,\n    });\n    if (data.total <= 12) {\n      container.classList.add('visually-hidden');\n    } else {\n      container.classList.remove('visually-hidden');\n    }\n    const markupImg = markup(data.results);\n    galleryList.innerHTML = markupImg;\n    pagination.reset(data.total);\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Error',\n    });\n    console.log(error);\n  } finally {\n    loaderElem.classList.add('visually-hidden');\n    searchFormElem.reset();\n  }\n  pagination.on('afterMove', byQueryImages);\n});\n\nfunction byQueryImages(event) {\n  const currentPage = event.page;\n  loaderElem.classList.remove('visually-hidden');\n  api\n    .getPhotosByQuery(currentPage)\n    .then(data => {\n      const markupImg = markup(data.results);\n      galleryList.innerHTML = markupImg;\n    })\n    .catch(error => console.log(error))\n    .finally(() => loaderElem.classList.add('visually-hidden'));\n}\n\ngalleryList.addEventListener('click', event => {\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n  const id = event.target.closest('li').id;\n  console.log(id);\n});\n\napi\n  .getStats()\n  .then(data => console.log(data))\n  .catch(error => console.log(error));\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","_searchParams","__privateGet","page","url","axios","error","iziToast","newQuery","__privateSet","data","markup","imgs","id","small","alt_description","galleryList","searchFormElem","loaderElem","container","pagination","Pagination","api","markupImg","popularImages","event","currentPage","inputValue","byQueryImages"],"mappings":"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"}